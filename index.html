<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài kiểm tra Toán Lớp 6 - 90 Phút</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: Ứng dụng được cấu trúc lại thành một bài kiểm tra theo từng giai đoạn. Giai đoạn 1 là màn hình bắt đầu, giới thiệu bài kiểm tra và luật chơi. Giai đoạn 2 là giao diện làm bài chính, hiển thị 60 câu hỏi trong một cột duy nhất để dễ dàng cuộn và tập trung. Một thanh bên phải cố định chứa đồng hồ đếm ngược, thanh tiến trình và nút nộp bài. Giai đoạn 3 là màn hình kết quả, hiển thị điểm số và cho phép xem lại chi tiết từng câu trả lời. Cấu trúc này tối ưu hóa trải nghiệm làm bài thi, giảm thiểu sự phân tâm và cung cấp phản hồi rõ ràng sau khi hoàn thành. -->
    <!-- Visualization & Content Choices: Dữ liệu bài tập được tuyển chọn lại thành 60 câu hỏi phù hợp với định dạng điền đáp án ngắn. Mỗi câu hỏi có một ô input để người dùng nhập câu trả lời. Đồng hồ đếm ngược và thanh tiến trình cung cấp phản hồi trực quan về thời gian và tiến độ. Màn hình kết quả sử dụng màu sắc (xanh cho đúng, đỏ cho sai) để làm nổi bật câu trả lời, giúp người dùng nhanh chóng xác định lỗi sai. Tương tác chính là nhập liệu và nộp bài. Việc sử dụng localStorage để lưu trạng thái bài thi (thời gian kết thúc) là một lựa chọn kỹ thuật quan trọng để ngăn chặn gian lận bằng cách tải lại trang. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .quiz-container ol {
            counter-reset: item;
        }
        .quiz-container li::before {
            counter-increment: item;
            content: counter(item) ". ";
            font-weight: 700;
            color: #6D5D4B;
        }
        .sticky-sidebar {
            position: sticky;
            top: 8rem;
        }
    </style>
</head>
<body class="antialiased">
    <div id="app" class="min-h-screen">
        <header class="bg-white shadow-sm sticky top-0 z-20">
            <div class="container mx-auto px-4 py-3">
                <h1 class="text-2xl font-bold text-[#6D5D4B]">Bài kiểm tra cuối kỳ I - Môn Toán Lớp 6</h1>
                <p class="text-sm text-gray-500">Thời gian làm bài: 90 phút</p>
            </div>
        </header>

        <main class="container mx-auto p-4">
            <div id="start-screen" class="text-center bg-white p-8 rounded-lg shadow-md max-w-2xl mx-auto mt-10">
                <h2 class="text-3xl font-bold mb-4 text-[#6D5D4B]">Hướng dẫn làm bài kiểm tra</h2>
                <p class="mb-2">Bài kiểm tra gồm <strong>60 câu hỏi</strong> điền đáp án.</p>
                <p class="mb-2">Thời gian làm bài là <strong>90 phút</strong>.</p>
                <p class="mb-2 text-red-600 font-semibold">Lưu ý: Thời gian sẽ tiếp tục chạy ngay cả khi bạn tải lại trang. Hết giờ bài sẽ tự động nộp.</p>
                <p class="mb-6">Hãy đọc kỹ đề và điền câu trả lời của bạn vào ô trống.</p>
                <button id="start-quiz-btn" class="bg-[#8C7B69] text-white font-bold py-3 px-8 rounded-lg hover:bg-[#6D5D4B] transition-colors text-lg">Bắt đầu làm bài</button>
            </div>

            <div id="quiz-section" class="hidden grid grid-cols-1 lg:grid-cols-12 gap-6">
                <div class="lg:col-span-8 bg-white p-6 rounded-lg shadow-sm quiz-container">
                    <form id="quiz-form">
                        <ol class="space-y-6">
                        </ol>
                    </form>
                </div>
                <aside class="lg:col-span-4">
                    <div class="sticky-sidebar bg-white p-6 rounded-lg shadow-sm">
                        <h2 class="text-xl font-bold mb-4 text-[#6D5D4B]">Thời gian còn lại</h2>
                        <div id="timer" class="text-5xl font-bold text-center text-red-500 bg-gray-100 p-4 rounded-lg mb-6">90:00</div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
                            <div id="progress-bar" class="bg-[#B9A997] h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                        <p id="progress-text" class="text-center text-sm text-gray-600 mb-6">Đã trả lời: 0/60</p>
                        <button id="submit-quiz-btn" class="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors text-lg">Nộp bài</button>
                    </div>
                </aside>
            </div>

            <div id="results-screen" class="hidden bg-white p-8 rounded-lg shadow-md max-w-4xl mx-auto mt-10">
                <h2 class="text-3xl font-bold mb-4 text-center text-[#6D5D4B]">Kết quả bài kiểm tra</h2>
                <div class="text-center mb-6">
                    <p class="text-lg">Số câu đúng:</p>
                    <p class="text-6xl font-bold text-green-600 my-2"><span id="score"></span>/60</p>
                </div>
                <div id="review-container">
                    <h3 class="text-xl font-bold mb-4 border-t pt-4">Xem lại bài làm:</h3>
                    <div id="review-answers" class="space-y-4 max-h-[60vh] overflow-y-auto pr-3"></div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const quizQuestions = [
            { q: "Viết tập hợp A các số tự nhiên lớn hơn 8 và nhỏ hơn 12 bằng cách liệt kê. Viết các phần tử cách nhau bởi dấu phẩy, không có khoảng trắng. Ví dụ: 1,2,3", a: "9,10,11" },
            { q: "Cho tập hợp B = {2; 4; 6; 8}. Tính chất đặc trưng của các phần tử trong B là 'các số tự nhiên chẵn, khác 0 và nhỏ hơn ...'. Điền số thích hợp vào chỗ trống.", a: "10" },
            { q: "Viết tập hợp các chữ cái trong từ 'HỌC SINH' (mỗi chữ cái chỉ viết một lần, theo thứ tự từ điển). Viết liền không dấu phẩy, không khoảng trắng. Ví dụ: ABC", a: "CHHINO" },
            { q: "Tính số phần tử của tập hợp các số tự nhiên không vượt quá 50.", a: "51" },
            { q: "Viết số 'Hai mươi triệu không trăm linh năm' bằng chữ số.", a: "20000005" },
            { q: "Cho số 19283. Giá trị của chữ số 9 là bao nhiêu?", a: "9000" },
            { q: "Viết số La Mã XIX sang hệ thập phân.", a: "19" },
            { q: "Viết số 34 bằng chữ số La Mã.", a: "XXXIV" },
            { q: "Sắp xếp các số sau theo thứ tự tăng dần: 2847; 2748; 4827; 4782. Viết đáp án cách nhau bởi dấu phẩy, không khoảng trắng.", a: "2748,2847,4782,4827" },
            { q: "Tìm số liền sau của số 9999.", a: "10000" },
            { q: "Tìm số tự nhiên x, biết 18 ≤ x < 20. Viết các giá trị cách nhau bởi dấu phẩy, không khoảng trắng.", a: "18,19" },
            { q: "Cho ba số tự nhiên liên tiếp tăng dần a, 200, b. Tìm giá trị của b.", a: "201" },
            { q: "Tính nhanh: 81 + 243 + 19.", a: "343" },
            { q: "Tìm số tự nhiên x, biết: 450 - x = 120.", a: "330" },
            { q: "Một cửa hàng buổi sáng bán 150 kg gạo, buổi chiều bán nhiều hơn buổi sáng 25 kg. Cả ngày cửa hàng bán được bao nhiêu kg gạo?", a: "325" },
            { q: "Tính tổng của tất cả các số tự nhiên có hai chữ số.", a: "4905" },
            { q: "Tính nhanh: 25 × 17 × 4.", a: "1700" },
            { q: "Tìm số tự nhiên x, biết: 1200 : x = 40.", a: "30" },
            { q: "Tìm số dư trong phép chia 247 cho 5.", a: "2" },
            { q: "Một trường tổ chức cho 200 học sinh đi tham quan. Cần ít nhất bao nhiêu xe 45 chỗ để chở hết học sinh?", a: "5" },
            { q: "Tính giá trị của 3⁴.", a: "81" },
            { q: "Viết kết quả 5³ × 5⁶ dưới dạng một luỹ thừa (ví dụ: 2^3).", a: "5^9" },
            { q: "Tìm số tự nhiên x, biết 2ˣ = 32.", a: "5" },
            { q: "So sánh 2³ và 3². Điền dấu >, <, hoặc =.", a: "<" },
            { q: "Tính: 150 - 100 : 25 × 2.", a: "142" },
            { q: "Tính: 5 × 3² - 32.", a: "13" },
            { q: "Tính: 200 : [117 - (23 - 6)].", a: "2" },
            { q: "Tìm x, biết: 2 × (x + 25) = 100.", a: "25" },
            { q: "Tìm tất cả các ước của 18. Viết các ước cách nhau bởi dấu phẩy, không khoảng trắng.", a: "1,2,3,6,9,18" },
            { q: "Tìm 5 bội đầu tiên (kể cả 0) của 7. Viết cách nhau bởi dấu phẩy, không khoảng trắng.", a: "0,7,14,21,28" },
            { q: "Tổng 150 + 255 có chia hết cho 5 không? (Có/Không)", a: "Có" },
            { q: "Chứng tỏ rằng tổng ba số tự nhiên liên tiếp luôn chia hết cho 3. Tổng đó bằng 3n + ... Điền số thích hợp.", a: "3" },
            { q: "Trong các số 124, 345, 780, 298, số nào chia hết cho cả 2 và 5?", a: "780" },
            { q: "Tìm chữ số * để số 5*8 chia hết cho 3. Tìm giá trị lớn nhất của *.", a: "8" },
            { q: "Tìm chữ số * để số 45* chia hết cho 9. Tìm giá trị nhỏ nhất của *.", a: "0" },
            { q: "Tìm các chữ số x, y để số 1x8y chia hết cho 2, 5 và 9. Tìm giá trị của x+y lớn nhất.", a: "9" },
            { q: "Số 17 là số nguyên tố hay hợp số?", a: "số nguyên tố" },
            { q: "Phân tích số 60 ra thừa số nguyên tố (viết dạng 2^a*3^b*5^c).", a: "2^2*3*5" },
            { q: "Tổng 3 × 5 × 7 + 9 là số nguyên tố hay hợp số?", a: "hợp số" },
            { q: "Một số có phân tích thừa số nguyên tố là 2³ × 5. Số đó có bao nhiêu ước?", a: "8" },
            { q: "Tìm ƯCLN(24, 36).", a: "12" },
            { q: "Rút gọn phân số 48/72 về tối giản (dạng a/b).", a: "2/3" },
            { q: "Tìm số tự nhiên x lớn nhất biết 90 và 126 đều chia hết cho x.", a: "18" },
            { q: "Một đội y tế có 24 bác sĩ và 108 y tá. Có thể chia thành nhiều nhất bao nhiêu tổ để số bác sĩ và y tá được chia đều?", a: "12" },
            { q: "Tìm BCNN(8, 12).", a: "24" },
            { q: "Tìm số tự nhiên x nhỏ nhất khác 0 biết x chia hết cho 12 và 18.", a: "36" },
            { q: "Học sinh lớp 6 khi xếp hàng 2, 3, 4 đều vừa đủ. Biết số học sinh trong khoảng 35 đến 45. Tính số học sinh.", a: "36" },
            { q: "Tìm số tự nhiên nhỏ nhất chia cho 3, 4, 5 đều dư 1.", a: "61" },
            { q: "Tìm số đối của -15.", a: "15" },
            { q: "Tính |-9|.", a: "9" },
            { q: "Sắp xếp theo thứ tự tăng dần: 4, -5, 0, 2, -10. Viết cách nhau bởi dấu phẩy, không khoảng trắng.", a: "-10,-5,0,2,4" },
            { q: "Liệt kê các phần tử của tập hợp A = {x ∈ ℤ | -2 < x ≤ 1}. Viết cách nhau bởi dấu phẩy, không khoảng trắng.", a: "-1,0,1" },
            { q: "Tính: (-15) + (-28).", a: "-43" },
            { q: "Tính: 18 - 30.", a: "-12" },
            { q: "Tính: (-12) - (-18).", a: "6" },
            { q: "Tính tổng S = 1 + (-2) + 3 + (-4) + ... + 19 + (-20).", a: "-10" },
            { q: "Bỏ ngoặc rồi tính: (15 + 37) + (52 - 37 - 17).", a: "50" },
            { q: "Tính: 12 - (15 - 18).", a: "15" },
            { q: "Tìm x, biết: 15 - (x + 7) = -2.", a: "10" }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const startScreen = document.getElementById('start-screen');
            const quizSection = document.getElementById('quiz-section');
            const resultsScreen = document.getElementById('results-screen');
            const startBtn = document.getElementById('start-quiz-btn');
            const submitBtn = document.getElementById('submit-quiz-btn');
            const quizForm = document.getElementById('quiz-form');
            const timerEl = document.getElementById('timer');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');

            let timerInterval;
            const quizDuration = 90 * 60; // 90 minutes in seconds

            function startQuiz() {
                const endTime = Date.now() + quizDuration * 1000;
                localStorage.setItem('quizEndTime', endTime);
                startScreen.classList.add('hidden');
                quizSection.classList.remove('hidden');
                renderQuiz();
                startTimer();
            }

            function renderQuiz() {
                const quizOl = quizForm.querySelector('ol');
                let html = '';
                quizQuestions.forEach((item, index) => {
                    html += `
                        <li class="flex flex-col sm:flex-row sm:items-center gap-2">
                            <label for="q${index}" class="flex-1">${item.q}</label>
                            <input type="text" id="q${index}" name="q${index}" class="w-full sm:w-48 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#B9A997] focus:border-[#B9A997] transition">
                        </li>
                    `;
                });
                quizOl.innerHTML = html;
                quizForm.querySelectorAll('input').forEach(input => {
                    input.addEventListener('input', updateProgress);
                });
            }
            
            function updateProgress() {
                const inputs = quizForm.querySelectorAll('input');
                let answeredCount = 0;
                inputs.forEach(input => {
                    if (input.value.trim() !== '') {
                        answeredCount++;
                    }
                });
                const percentage = (answeredCount / 60) * 100;
                progressBar.style.width = `${percentage}%`;
                progressText.textContent = `Đã trả lời: ${answeredCount}/60`;
            }

            function startTimer() {
                const endTime = localStorage.getItem('quizEndTime');
                if (!endTime) return;

                timerInterval = setInterval(() => {
                    const remaining = Math.round((endTime - Date.now()) / 1000);
                    if (remaining <= 0) {
                        clearInterval(timerInterval);
                        timerEl.textContent = "00:00";
                        submitQuiz();
                    } else {
                        const minutes = Math.floor(remaining / 60);
                        const seconds = remaining % 60;
                        timerEl.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    }
                }, 1000);
            }

            function submitQuiz() {
                clearInterval(timerInterval);
                
                const userAnswers = [];
                quizQuestions.forEach((_, index) => {
                    const input = document.getElementById(`q${index}`);
                    userAnswers.push(input.value.trim().toLowerCase());
                });

                let score = 0;
                const reviewData = [];
                quizQuestions.forEach((q, index) => {
                    const isCorrect = userAnswers[index] === q.a.toLowerCase();
                    if (isCorrect) {
                        score++;
                    }
                    reviewData.push({
                        question: q.q,
                        userAnswer: userAnswers[index],
                        correctAnswer: q.a,
                        isCorrect: isCorrect
                    });
                });

                showResults(score, reviewData);
                localStorage.removeItem('quizEndTime');
            }

            function showResults(score, reviewData) {
                quizSection.classList.add('hidden');
                resultsScreen.classList.remove('hidden');

                document.getElementById('score').textContent = score;
                const reviewAnswersEl = document.getElementById('review-answers');
                let html = '';
                reviewData.forEach((item, index) => {
                    const bgColor = item.isCorrect ? 'bg-green-50' : 'bg-red-50';
                    const textColor = item.isCorrect ? 'text-green-700' : 'text-red-700';
                    html += `
                        <div class="${bgColor} p-3 rounded-lg">
                            <p class="font-semibold">${index + 1}. ${item.question}</p>
                            <p class="text-sm">Câu trả lời của bạn: <span class="font-medium ${textColor}">${item.userAnswer || '<i>Chưa trả lời</i>'}</span></p>
                            ${!item.isCorrect ? `<p class="text-sm">Đáp án đúng: <span class="font-medium text-green-700">${item.correctAnswer}</span></p>` : ''}
                        </div>
                    `;
                });
                reviewAnswersEl.innerHTML = html;
            }

            startBtn.addEventListener('click', startQuiz);
            submitBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (confirm('Bạn có chắc chắn muốn nộp bài không?')) {
                    submitQuiz();
                }
            });

            // Check if a quiz is in progress on page load
            const existingEndTime = localStorage.getItem('quizEndTime');
            if (existingEndTime) {
                if (Date.now() > existingEndTime) {
                    // Time is up, but user didn't submit. Force submit with empty answers.
                    submitQuiz(); 
                } else {
                    // Resume quiz
                    startScreen.classList.add('hidden');
                    quizSection.classList.remove('hidden');
                    renderQuiz();
                    startTimer();
                }
            }
        });
    </script>
</body>
</html>
