<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bài kiểm tra số 1 toán lớp 6 của BẠCH THÁI HOÀ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: Ứng dụng được cấu trúc lại thành một bài kiểm tra theo từng giai đoạn. Giai đoạn 1 là màn hình bắt đầu, giới thiệu bài kiểm tra và luật chơi, có thêm cơ chế khóa thời gian. Giai đoạn 2 là giao diện làm bài chính, hiển thị 40 câu hỏi. Một thanh bên phải cố định chứa đồng hồ đếm ngược, thanh tiến trình và nút nộp bài. Giai đoạn 3 là màn hình kết quả, hiển thị điểm số và cho phép xem lại chi tiết. Cấu trúc này tối ưu hóa trải nghiệm làm bài thi, giảm thiểu sự phân tâm và cung cấp phản hồi rõ ràng sau khi hoàn thành. -->
    <!-- Visualization & Content Choices: Dữ liệu bài tập được tuyển chọn lại thành 40 câu hỏi mới, phù hợp với định dạng điền đáp án ngắn. Đồng hồ đếm ngược và thanh tiến trình cung cấp phản hồi trực quan. Màn hình kết quả sử dụng màu sắc (xanh cho đúng, đỏ cho sai) để làm nổi bật câu trả lời. Việc sử dụng localStorage để lưu trạng thái (thời gian kết thúc, đã hoàn thành, kết quả) là lựa chọn kỹ thuật quan trọng để ngăn chặn gian lận và đảm bảo quy tắc chỉ làm bài một lần. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Be Vietnam Pro', sans-serif;
            background-color: #FDFBF8;
            color: #4A4A4A;
        }
        .quiz-container ol {
            counter-reset: item;
        }
        .quiz-container li::before {
            counter-increment: item;
            content: counter(item) ". ";
            font-weight: 700;
            color: #6D5D4B;
        }
        .sticky-sidebar {
            position: sticky;
            top: 8rem;
        }
        #start-quiz-btn:disabled {
            background-color: #d1c4b3;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="antialiased">
    <div id="app" class="min-h-screen">
        <header class="bg-white shadow-sm sticky top-0 z-20">
            <div class="container mx-auto px-4 py-3">
                <h1 class="text-2xl font-bold text-[#6D5D4B]">Bài kiểm tra số 1 toán lớp 6 của BẠCH THÁI HOÀ</h1>
                <p class="text-sm text-gray-500">Thời gian làm bài: 60 phút</p>
            </div>
        </header>

        <main class="container mx-auto p-4">
            <div id="start-screen" class="text-center bg-white p-8 rounded-lg shadow-md max-w-2xl mx-auto mt-10">
                <h2 class="text-3xl font-bold mb-4 text-[#6D5D4B]">Hướng dẫn làm bài kiểm tra</h2>
                <p class="mb-2">Bài kiểm tra gồm <strong>40 câu hỏi</strong> điền đáp án.</p>
                <p class="mb-2">Thời gian làm bài là <strong>60 phút</strong>.</p>
                <p class="mb-2 text-blue-600 font-semibold">Bài kiểm tra sẽ mở vào lúc <strong>18:00 ngày 17/08/2025</strong>.</p>
                <p class="mb-2 text-red-600 font-semibold">Lưu ý: Bạn chỉ được làm bài <strong>MỘT LẦN DUY NHẤT</strong>. Hết giờ bài sẽ tự động nộp.</p>
                <button id="start-quiz-btn" class="bg-[#8C7B69] text-white font-bold py-3 px-8 rounded-lg hover:bg-[#6D5D4B] transition-colors text-lg mt-4">Bắt đầu làm bài</button>
            </div>

            <div id="quiz-section" class="hidden grid grid-cols-1 lg:grid-cols-12 gap-6">
                <div class="lg:col-span-8 bg-white p-6 rounded-lg shadow-sm quiz-container">
                    <form id="quiz-form">
                        <ol class="space-y-6">
                        </ol>
                    </form>
                </div>
                <aside class="lg:col-span-4">
                    <div class="sticky-sidebar bg-white p-6 rounded-lg shadow-sm">
                        <h2 class="text-xl font-bold mb-4 text-[#6D5D4B]">Thời gian còn lại</h2>
                        <div id="timer" class="text-5xl font-bold text-center text-red-500 bg-gray-100 p-4 rounded-lg mb-6">60:00</div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-4">
                            <div id="progress-bar" class="bg-[#B9A997] h-2.5 rounded-full" style="width: 0%"></div>
                        </div>
                        <p id="progress-text" class="text-center text-sm text-gray-600 mb-6">Đã trả lời: 0/40</p>
                        <button id="submit-quiz-btn" class="w-full bg-green-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors text-lg">Nộp bài</button>
                    </div>
                </aside>
            </div>

            <div id="results-screen" class="hidden bg-white p-8 rounded-lg shadow-md max-w-4xl mx-auto mt-10">
                <h2 id="result-title" class="text-3xl font-bold mb-4 text-center text-[#6D5D4B]">Kết quả bài kiểm tra</h2>
                <div class="text-center mb-6">
                    <p class="text-lg">Số câu đúng:</p>
                    <p class="text-6xl font-bold text-green-600 my-2"><span id="score"></span>/40</p>
                </div>
                <div id="review-container">
                    <h3 class="text-xl font-bold mb-4 border-t pt-4">Xem lại đáp án chi tiết:</h3>
                    <div id="review-answers" class="space-y-4 max-h-[60vh] overflow-y-auto pr-3"></div>
                </div>
            </div>
        </main>
    </div>

    <script>
        const quizQuestions = [
            { q: "Viết tập hợp M các số tự nhiên x sao cho 15 < x ≤ 20 bằng cách liệt kê. (Ví dụ: 1,2,3)", a: "16,17,18,19,20" },
            { q: "Tìm số tự nhiên có 2 chữ số, biết rằng khi viết thêm chữ số 2 vào bên trái, ta được số mới gấp 9 lần số ban đầu.", a: "25" },
            { q: "So sánh A = 2022 × 2024 và B = 2023 × 2023. Điền dấu >, <, hoặc =.", a: "<" },
            { q: "Tính tổng của tất cả các số tự nhiên chẵn có hai chữ số.", a: "2430" },
            { q: "Tích của hai số là 276. Nếu thêm 19 đơn vị vào một thừa số thì tích mới là 713. Tìm thừa số lớn hơn.", a: "23" },
            { q: "Tìm số tự nhiên x, biết 1 + 2 + 3 + ... + x = 55.", a: "10" },
            { q: "So sánh 27⁵ và 243³. Điền dấu >, <, hoặc =.", a: "=" },
            { q: "Tìm số tự nhiên n, biết: 3ⁿ + 3ⁿ⁺² = 90.", a: "2" },
            { q: "Tính giá trị biểu thức: 480 : {75 + [7² - 8 × 3] : 5} + 2025⁰.", a: "7" },
            { q: "Tìm x, biết: 5² × (x - 3) - 20 = 80.", a: "7" },
            { q: "Tìm n ∈ ℕ để (2n + 7) ⋮ (n + 1). Tìm giá trị lớn nhất của n.", a: "4" },
            { q: "Chứng tỏ rằng với mọi số tự nhiên n, tích (n+3)(n+6) luôn chia hết cho số nào sau đây: 3, 5, 2?", a: "2" },
            { q: "Tìm các chữ số x, y để số 1x8y chia hết cho 2, 5 và 9. Tìm giá trị của x lớn nhất.", a: "9" },
            { q: "Một số chia cho 5 dư 3, chia cho 2 dư 1. Chữ số tận cùng của số đó là gì?", a: "3" },
            { q: "Tìm các chữ số a, b để số a18b chia hết cho 45. Tìm số a18b lớn nhất.", a: "9180" },
            { q: "Tìm số nguyên tố p sao cho p+2 và p+4 cũng là các số nguyên tố.", a: "3" },
            { q: "Tổng của hai số nguyên tố có thể bằng 2025 được không? (Có/Không)", a: "Không" },
            { q: "Một số được phân tích ra thừa số nguyên tố là 2³ × 3² × 5. Số đó có bao nhiêu ước?", a: "24" },
            { q: "Tìm hai số tự nhiên a, b biết a+b=48 và ƯCLN(a,b)=6. Tìm tích a*b lớn nhất.", a: "540" },
            { q: "Tìm số tự nhiên x biết rằng 112 ⋮ x, 140 ⋮ x và 10 < x < 20.", a: "14" },
            { q: "Một mảnh đất hình chữ nhật dài 120m, rộng 48m. Người ta muốn chia thành các ô vuông bằng nhau để trồng hoa. Cạnh mỗi ô vuông lớn nhất là bao nhiêu mét?", a: "24" },
            { q: "Tìm BCNN(10, 12, 15).", a: "60" },
            { q: "Tìm số tự nhiên nhỏ nhất có 3 chữ số chia cho 3, 4, 5 đều dư 1.", a: "121" },
            { q: "Tìm hai số tự nhiên a, b biết a × b = 360 và BCNN(a,b)=60. Tìm a+b nhỏ nhất.", a: "42" },
            { q: "Số học sinh khối 6 của một trường trong khoảng 200 đến 400. Khi xếp hàng 12, 15, 18 đều thừa 5 học sinh. Tính số học sinh.", a: "365" },
            { q: "Một bến xe cứ 10 phút lại có một chuyến xe buýt, 12 phút lại có một chuyến taxi rời bến. Lúc 6 giờ, cả hai xe cùng rời bến. Hỏi lúc mấy giờ tiếp theo, chúng lại cùng rời bến? (Ví dụ: 7 giờ)", a: "7 giờ" },
            { q: "Tìm tổng tất cả các số nguyên x biết -10 ≤ x < 11.", a: "10" },
            { q: "Tìm số nguyên x lớn nhất thoả mãn x < -100.", a: "-101" },
            { q: "Tính tổng: S = 1 + (-2) + 3 + (-4) + ... + 99 + (-100).", a: "-50" },
            { q: "Tính nhanh: (125 - 679 + 145) - (125 - 679).", a: "145" },
            { q: "Tìm x ∈ ℤ biết |x-2| = 5. Tìm giá trị nhỏ nhất của x.", a: "-3" },
            { q: "Một tòa nhà có 10 tầng và 2 tầng hầm (tầng -1, -2). Thang máy đang ở tầng 7, đi xuống 10 tầng. Thang máy dừng lại ở tầng nào?", a: "-2" },
            { q: "Bỏ ngoặc rồi tính: -(283 - 85) + (283 - 15).", a: "70" },
            { q: "Tính một cách hợp lí: 21 - 22 + 23 - 24 + ... + 49 - 50.", a: "-15" },
            { q: "Đơn giản biểu thức: A = (a + b) - (a - b + c). (Viết liền, không khoảng trắng)", a: "2b-c" },
            { q: "Tìm x, biết: -(x - 12) + 10 = 5 - (13 - x).", a: "15" },
            { q: "Cho S₁ = 1+(-3)+...+2021+(-2023) và S₂ = (-2)+4+...+(-2022)+2024. Tính S₁+S₂.", a: "0" },
            { q: "Đặt dấu ngoặc để được kết quả đúng: 7 - 9 - 12 + 4 = 14. (Ví dụ: 7-(9-12)+4)", a: "7-(9-12-4)" },
            { q: "Cho A = a-b+c và B = -a+b-c. A và B là hai số... (đối nhau/bằng nhau/khác nhau)", a: "đối nhau" },
            { q: "Tìm số tự nhiên nhỏ nhất có 4 chữ số khác nhau chia hết cho cả 3 và 5.", a: "1035" },
        ];

        document.addEventListener('DOMContentLoaded', () => {
            const startScreen = document.getElementById('start-screen');
            const quizSection = document.getElementById('quiz-section');
            const resultsScreen = document.getElementById('results-screen');
            const startBtn = document.getElementById('start-quiz-btn');
            const submitBtn = document.getElementById('submit-quiz-btn');
            const quizForm = document.getElementById('quiz-form');
            const timerEl = document.getElementById('timer');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const resultTitle = document.getElementById('result-title');

            const quizDuration = 60 * 60;
            const questionCount = 40;
            const targetStartTime = new Date('2025-08-17T18:00:00');
            let timerInterval;
            let timeGateInterval;

            function checkCompletionStatus() {
                const completed = localStorage.getItem('quizCompleted_BTH');
                if (completed) {
                    const score = localStorage.getItem('quizScore_BTH');
                    const reviewData = JSON.parse(localStorage.getItem('quizReviewData_BTH'));
                    startScreen.classList.add('hidden');
                    quizSection.classList.add('hidden');
                    showResults(score, reviewData, true);
                    return true;
                }
                return false;
            }

            function checkTimeGate() {
                const now = new Date();
                if (now >= targetStartTime) {
                    startBtn.disabled = false;
                    startBtn.textContent = "Bắt đầu làm bài";
                    if (timeGateInterval) clearInterval(timeGateInterval);
                } else {
                    startBtn.disabled = true;
                    const remaining = Math.round((targetStartTime - now) / 1000);
                    const hours = Math.floor(remaining / 3600);
                    const minutes = Math.floor((remaining % 3600) / 60);
                    const seconds = remaining % 60;
                    startBtn.textContent = `Mở sau: ${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                }
            }
            
            function startQuiz() {
                const endTime = Date.now() + quizDuration * 1000;
                localStorage.setItem('quizEndTime_BTH', endTime);
                startScreen.classList.add('hidden');
                quizSection.classList.remove('hidden');
                renderQuiz();
                startTimer();
            }

            function renderQuiz() {
                const quizOl = quizForm.querySelector('ol');
                let html = '';
                quizQuestions.forEach((item, index) => {
                    html += `
                        <li class="flex flex-col sm:flex-row sm:items-center gap-2">
                            <label for="q${index}" class="flex-1">${item.q}</label>
                            <input type="text" id="q${index}" name="q${index}" class="w-full sm:w-48 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#B9A997] focus:border-[#B9A997] transition">
                        </li>
                    `;
                });
                quizOl.innerHTML = html;
                quizForm.querySelectorAll('input').forEach(input => {
                    input.addEventListener('input', updateProgress);
                });
            }
            
            function updateProgress() {
                const inputs = quizForm.querySelectorAll('input');
                let answeredCount = 0;
                inputs.forEach(input => {
                    if (input.value.trim() !== '') {
                        answeredCount++;
                    }
                });
                const percentage = (answeredCount / questionCount) * 100;
                progressBar.style.width = `${percentage}%`;
                progressText.textContent = `Đã trả lời: ${answeredCount}/${questionCount}`;
            }

            function startTimer() {
                const endTime = localStorage.getItem('quizEndTime_BTH');
                if (!endTime) return;

                timerInterval = setInterval(() => {
                    const remaining = Math.round((endTime - Date.now()) / 1000);
                    if (remaining <= 0) {
                        clearInterval(timerInterval);
                        timerEl.textContent = "00:00";
                        submitQuiz();
                    } else {
                        const minutes = Math.floor(remaining / 60);
                        const seconds = remaining % 60;
                        timerEl.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
                    }
                }, 1000);
            }

            function submitQuiz() {
                clearInterval(timerInterval);
                
                const userAnswers = [];
                quizQuestions.forEach((_, index) => {
                    const input = document.getElementById(`q${index}`);
                    userAnswers.push(input ? input.value.trim().toLowerCase() : "");
                });

                let score = 0;
                const reviewData = [];
                quizQuestions.forEach((q, index) => {
                    const isCorrect = userAnswers[index].replace(/\s/g, '') === q.a.toLowerCase().replace(/\s/g, '');
                    if (isCorrect) {
                        score++;
                    }
                    reviewData.push({
                        question: q.q,
                        userAnswer: userAnswers[index],
                        correctAnswer: q.a,
                        isCorrect: isCorrect
                    });
                });
                
                localStorage.setItem('quizCompleted_BTH', 'true');
                localStorage.setItem('quizScore_BTH', score);
                localStorage.setItem('quizReviewData_BTH', JSON.stringify(reviewData));
                showResults(score, reviewData);
                localStorage.removeItem('quizEndTime_BTH');
            }

            function showResults(score, reviewData, isReview = false) {
                quizSection.classList.add('hidden');
                resultsScreen.classList.remove('hidden');

                if (isReview) {
                    resultTitle.textContent = "Kết quả lần làm bài trước";
                }

                document.getElementById('score').textContent = score;
                const reviewAnswersEl = document.getElementById('review-answers');
                let html = '';
                reviewData.forEach((item, index) => {
                    const bgColor = item.isCorrect ? 'bg-green-50' : 'bg-red-50';
                    const textColor = item.isCorrect ? 'text-green-700' : 'text-red-700';
                    html += `
                        <div class="${bgColor} p-3 rounded-lg">
                            <p class="font-semibold">${index + 1}. ${item.question}</p>
                            <p class="text-sm">Câu trả lời của bạn: <span class="font-medium ${textColor}">${item.userAnswer || '<i>Chưa trả lời</i>'}</span></p>
                            ${!item.isCorrect ? `<p class="text-sm">Đáp án đúng: <span class="font-medium text-green-700">${item.correctAnswer}</span></p>` : ''}
                        </div>
                    `;
                });
                reviewAnswersEl.innerHTML = html;
            }

            if (!checkCompletionStatus()) {
                const existingEndTime = localStorage.getItem('quizEndTime_BTH');
                if (existingEndTime) {
                    if (Date.now() > existingEndTime) {
                        submitQuiz(); 
                    } else {
                        startScreen.classList.add('hidden');
                        quizSection.classList.remove('hidden');
                        renderQuiz();
                        startTimer();
                    }
                } else {
                    timeGateInterval = setInterval(checkTimeGate, 1000);
                    checkTimeGate();
                }
            }
            
            startBtn.addEventListener('click', startQuiz);
            submitBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (confirm('Bạn có chắc chắn muốn nộp bài không?')) {
                    submitQuiz();
                }
            });
        });
    </script>
</body>
</html>
